@import "tailwindcss";

@font-face {
  font-family: "ArmedLemon";
  src: url("/ArmedLemon.TTF") format("truetype");
  font-display: swap;
}

:root {
  --background: #ffffff;
  --foreground: #171717;
  --font-omikuji:
    "ArmedLemon", "Hiragino Mincho ProN", "Yu Mincho",
    "Hiragino Kaku Gothic ProN", "Meiryo", serif;
}

@theme inline {
  --color-background: var(--background);
  --color-foreground: var(--foreground);
  --font-sans: var(--font-geist-sans);
  --font-mono: var(--font-geist-mono);
}

@media (prefers-color-scheme: dark) {
  :root {
    --background: #0a0a0a;
    --foreground: #ededed;
  }
}

body {
  background: var(--background);
  color: var(--foreground);
  font-family: Arial, Helvetica, sans-serif;
}

.kirakuji-float {
  animation: kirakuji-float var(--kirakuji-transition-duration, 1600ms)
    ease-in-out 1;
  animation-fill-mode: forwards;
}

.kirakuji-shadow {
  animation: kirakuji-shadow var(--kirakuji-transition-duration, 1600ms)
    ease-in-out 1;
  animation-fill-mode: forwards;
  filter: blur(12px);
}

.kirakuji-ring {
  animation: kirakuji-ring var(--kirakuji-transition-duration, 1600ms) ease-out
    1;
  animation-fill-mode: forwards;
}

.kirakuji-progress {
  animation: kirakuji-progress var(--kirakuji-transition-duration, 1600ms)
    ease-in-out 1;
  animation-fill-mode: forwards;
  width: 0%;
}

.kirakuji-talk {
  animation: kirakuji-talk 1400ms ease-in-out infinite;
  transform-origin: center bottom;
}

.kirakuji-typing-line {
  display: block;
  width: 0;
  max-width: 100%;
  overflow: hidden;
  white-space: nowrap;
  animation: kirakuji-typing 1200ms steps(16, end) forwards;
  border-right: 2px solid rgba(24, 24, 27, 0.6);
}

.kirakuji-typing-line.is-second {
  animation-delay: 1200ms;
}

.kirakuji-idle {
  animation: kirakuji-idle 4200ms ease-in-out infinite;
  transform-origin: center;
}

.kirakuji-reveal {
  animation: kirakuji-reveal 1400ms ease-in-out 2400ms infinite;
  transform-origin: center;
  opacity: 1;
}

@keyframes kirakuji-float {
  0% {
    transform: translateY(6px) rotate(-6deg) scale(0.97);
  }
  50% {
    transform: translateY(-8px) rotate(6deg) scale(1.03);
  }
  100% {
    transform: translateY(6px) rotate(-6deg) scale(0.97);
  }
}

@keyframes kirakuji-shadow {
  0% {
    transform: translateY(14px) scale(0.98);
    opacity: 0.18;
  }
  50% {
    transform: translateY(22px) scale(0.9);
    opacity: 0.08;
  }
  100% {
    transform: translateY(14px) scale(0.98);
    opacity: 0.18;
  }
}

@keyframes kirakuji-ring {
  0% {
    transform: scale(0.7);
    opacity: 0.4;
  }
  70% {
    transform: scale(1.2);
    opacity: 0;
  }
  100% {
    transform: scale(1.2);
    opacity: 0;
  }
}

@keyframes kirakuji-progress {
  0% {
    width: 0%;
  }
  50% {
    width: 55%;
  }
  100% {
    width: 100%;
  }
}

@keyframes kirakuji-talk {
  0% {
    transform: translateY(0) scale(1);
  }
  35% {
    transform: translateY(-4px) scale(1.02);
  }
  70% {
    transform: translateY(1px) scale(0.99);
  }
  100% {
    transform: translateY(0) scale(1);
  }
}

@keyframes kirakuji-typing {
  0% {
    width: 0;
  }
  100% {
    width: 100%;
  }
}

@keyframes kirakuji-idle {
  0% {
    transform: translateY(0) rotate(-1.5deg);
  }
  13% {
    transform: translateY(5px) rotate(2deg);
  }
  27% {
    transform: translateY(-2px) rotate(-0.5deg);
  }
  46% {
    transform: translateY(7px) rotate(1.2deg);
  }
  63% {
    transform: translateY(-4px) rotate(-2.2deg);
  }
  81% {
    transform: translateY(3px) rotate(1.6deg);
  }
  100% {
    transform: translateY(0) rotate(-1.5deg);
  }
}

@keyframes kirakuji-reveal {
  0% {
    transform: translateY(-2px) scale(0.99);
    opacity: 1;
  }
  40% {
    transform: translateY(-10px) scale(1.03);
    opacity: 1;
  }
  100% {
    transform: translateY(-2px) scale(0.99);
    opacity: 1;
  }
}

@media (prefers-reduced-motion: reduce) {
  .kirakuji-float,
  .kirakuji-shadow,
  .kirakuji-ring,
  .kirakuji-progress,
  .kirakuji-talk,
  .kirakuji-typing-line,
  .kirakuji-reveal,
  .kirakuji-idle {
    animation: none;
  }
}

.omikuji-text {
  font-family: var(--font-omikuji);
  line-height: 1.8;
  letter-spacing: 0.02em;
}

.omikuji-font {
  font-family: var(--font-omikuji);
}

.hand-underline {
  background-image: url("data:image/svg+xml,%3Csvg%20xmlns='http://www.w3.org/2000/svg'%20width='24'%20height='8'%20viewBox='0%200%2024%208'%3E%3Cpath%20d='M0%206%20L4%205%20L8%206%20L12%204%20L16%206%20L20%205%20L24%206'%20fill='none'%20stroke='%23ffffff'%20stroke-width='2'%20stroke-linecap='round'/%3E%3C/svg%3E");
  background-repeat: no-repeat;
  background-position: center 100%;
  background-size: 100% 8px;
  padding-bottom: 6px;
}
